<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
    <title>Lobby</title>
    <link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
		crossorigin="anonymous"
	/>
    <script src="http://localhost:8080/auth/js/keycloak.js"></script>
    <script src="../../js/keycloak-logic.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js">
    </script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js">
    </script>

    <script>
        AFRAME.registerComponent('logout-button', {
            init: function () {
                this.el.addEventListener('click', function (evt) {
                    console.log('Logout button clicked');
                    keycloak.logout();
                    let finishSession = new Date()
                    let finishSessionDate = finishSession.toISOString().replace('Z', '')
                    localStorage.setItem("finishSessionDate", finishSessionDate);
                });
            }
        });
    </script>
</head>

<body>
    <a-scene environment>
        <a-assets>
            <a-asset-item id="Lobby" src="assets/lobby/Lobby2.gltf"></a-asset-item>
            <a-asset-item id="backgroundLobby" src="assets/lobby/UI_Background.gltf"></a-asset-item>
            <a-asset-item id="backgroundElements" src="assets/lobby/UI_Background_Elements.gltf"></a-asset-item>
            <a-asset-item id="bienvenidos" src="assets/lobby/UI_Text_Bienvenidos.gltf"></a-asset-item>
            <a-asset-item id="procedimientos" src="assets/lobby/UI_Buttom_Procedimientos.gltf"></a-asset-item>
            <a-asset-item id="logout" src="assets/lobby/UI_Buttom_CerrarSesion.gltf"></a-asset-item>
            <a-asset-item id="ArrowLeft" src="assets/lobby/UI_Buttom_ArrowLeft.gltf"></a-asset-item>
            <a-asset-item id="ArrowRight" src="assets/lobby/UI_Buttom_ArrowRight.gltf"></a-asset-item>
            <img id="backgroundLobby2" src="../../img/backgroundLobby2.png"></img>
        </a-assets>

        <a-camera>
            <a-cursor></a-cursor>
        </a-camera>

        <a-entity light="type: ambient; color: #CCC; intensity: 0.6"></a-entity>
        <a-light color="white" intensity="0.7" position="0 4 0"></a-light>
        <a-entity gltf-model="#Lobby" position="0 0.395 0" rotation="179.9998479605043 0 179.9998479605043"></a-entity>
        <a-entity scale="0.710 0.690 0" id="background" gltf-model="#backgroundLobby" position="-0.05 1.65 -3"></a-entity>
        <a-entity scale="0.710 0.690 0" rotation="0 180 180" id="backgroundElements" gltf-model="#backgroundElements" position="-0.05 0.841 -2.996"></a-entity>
        <a-entity id="bienvenidos" gltf-model="#bienvenidos" position="0 2.717 -3"></a-entity>
        <a-entity id="procedimientos" gltf-model="#procedimientos" position="0 2.080 -2.972"></a-entity>
        <a-entity id="ArrowLeft" gltf-model="#ArrowLeft" position="-2.051 1.364 -2.977"></a-entity>
        <a-entity id="ArrowRight" gltf-model="#ArrowRight" position="2.015 1.364 -2.977"></a-entity>
        <a-entity id="logout" logout-button gltf-model="#logout" position="1.9 2.972 -2.961"></a-entity>
        <a-curvedimage src="#backgroundLobby2" height="3.0" radius="5.7" theta-length="170" tetha-start="22.100"
        rotation="0 95 0" scale="0.8 1.294 0.8" position="-0.132 1.832 -0.140"></a-curvedimage>

    </a-scene>

    <script src="../../js/keycloak-script.js"></script>
</body>

</html>